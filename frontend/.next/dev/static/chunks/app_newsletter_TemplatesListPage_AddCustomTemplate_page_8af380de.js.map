{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jagla/OneDrive/Desktop/CRM/my-app/app/newsletter/TemplatesListPage/AddCustomTemplate/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { Editor } from '@tinymce/tinymce-react';\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function AddCustomTemplatePage() {\r\n  const [templateName, setTemplateName] = useState(\"\");\r\n  const [visibility, setVisibility] = useState(\"admin\");\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [savedTemplates, setSavedTemplates] = useState(\"\");\r\n  const editorRef = useRef(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const existingTemplates = JSON.parse(localStorage.getItem(\"emailTemplates\") || \"[]\");\r\n    setSavedTemplates(existingTemplates);\r\n  }, []);\r\n\r\n  const handleSaveCustomTemplate = () => {\r\n    if (!templateName.trim()) {\r\n      alert('Please enter template name');\r\n      return;\r\n    }\r\n\r\n    const editorContent = editorRef.current ? editorRef.current.getContent() : '';\r\n\r\n    if (!editorContent.trim()) {\r\n      alert('Please create template content');\r\n      return;\r\n    }\r\n\r\n    const template = {\r\n      id: crypto.randomUUID(),\r\n      name: templateName.trim(),\r\n      content: editorContent,\r\n      visibility: visibility,\r\n      createdAt: new Date().toISOString(),\r\n      isCustom: true\r\n    };\r\n\r\n    const existingTemplates = JSON.parse(localStorage.getItem(\"emailTemplates\") || \"[]\");\r\n\r\n    const updatedTemplates = [template, ...existingTemplates];\r\n\r\n    localStorage.setItem(\"emailTemplates\", JSON.stringify(updatedTemplates));\r\n\r\n    setSavedTemplates(updatedTemplates);\r\n\r\n    alert('Template saved successfully !');\r\n\r\n    setTemplateName('');\r\n    setVisibility('admin');\r\n    setShowPreview(false);\r\n    if (editorRef.current) {\r\n      editorRef.current.setContent('<p>Hello...</p>');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-[#e5e7eb] p-0 sm:p-5 h-screen overflow-hidden flex justify-center items-start font-['Segoe_UI',Tahoma,Geneva,Verdana,sans-serif]\">\r\n      <style jsx global>{`\r\n        .tox-promotion,\r\n        .tox-statusbar__branding,\r\n        .tox-promotion-link {\r\n          display: none !important;\r\n        }\r\n      `}</style>\r\n      <div className=\"bg-white w-full border border-[black] max-w-[1400px] h-full overflow-y-auto\">\r\n        <div className=\"bg-white w-full px-4 sm:px-6 py-4 border-b border-gray-300\">\r\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n            <h1 className=\"text-xl sm:text-2xl font-normal text-gray-700\">\r\n              Add Custom <strong>Template</strong>\r\n            </h1>\r\n            <button\r\n              onClick={() => router.push(\"/newsletter/TemplatesListPage\")}\r\n              className=\"w-full sm:w-auto bg-gray-300 hover:bg-gray-400 active:bg-gray-500 text-gray-700 px-6 sm:px-8 py-2.5 rounded-md text-sm sm:text-base font-medium transition-colors whitespace-nowrap\"\r\n            >\r\n              ← Back to Templates\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-4 sm:p-6 md:p-8\">\r\n          <div className=\"mb-4 sm:mb-6\">\r\n            <label className=\"block text-sm sm:text-base font-medium text-gray-700 mb-2\">\r\n              Template Name <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={templateName}\r\n              onChange={(e) => setTemplateName(e.target.value)}\r\n              placeholder=\"Enter template name\"\r\n              className=\"w-full border border-gray-300 text-black rounded-md px-3 sm:px-4 py-2.5 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-4 sm:mb-6\">\r\n            <label className=\"block text-sm sm:text-base font-medium text-gray-700 mb-2\">\r\n              Message <strong className=\"text-red-500\">(Note: Please Enter Plain Text Only For Better Result)</strong>\r\n            </label>\r\n            <div className=\"border-2 border-gray-300 rounded-lg overflow-hidden\">\r\n              <Editor\r\n                apiKey=\"y1s9k2719cryc4c4lhyef3rypkcz2oy6t9fno5q4ngbqts9o\"\r\n                onInit={(evt, editor) => editorRef.current = editor}\r\n                initialValue=\"<p>Hello...</p>\"\r\n                init={{\r\n                  height: window.innerWidth < 640 ? 250 : 300,\r\n                  menubar: window.innerWidth >= 640,\r\n                  plugins: [\r\n                    'advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview',\r\n                    'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen',\r\n                    'insertdatetime', 'media', 'table', 'help', 'wordcount'\r\n                  ],\r\n                  toolbar: window.innerWidth < 640\r\n                    ? 'undo redo | bold italic | alignleft aligncenter | bullist numlist | link'\r\n                    : 'undo redo | blocks fontsize | ' +\r\n                    'bold italic forecolor backcolor | alignleft aligncenter ' +\r\n                    'alignright alignjustify | bullist numlist outdent indent | ' +\r\n                    'table image media link | removeformat code | preview fullscreen | help',\r\n                  content_style: `\r\n                    body { \r\n                      font-family: Arial, Helvetica, sans-serif; \r\n                      font-size: 14px;\r\n                      max-width: 100%;\r\n                      margin: 0;\r\n                      padding: 12px;\r\n                    }\r\n                    @media (min-width: 640px) {\r\n                      body {\r\n                        max-width: 800px;\r\n                        margin: 0 auto;\r\n                        padding: 20px;\r\n                      }\r\n                    }\r\n                  `,\r\n                  branding: false,\r\n                  promotion: false,\r\n                  mobile: {\r\n                    menubar: false,\r\n                    toolbar_mode: 'scrolling'\r\n                  },\r\n                  resize: false\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 mb-4 sm:mb-6\">\r\n            <label className=\"flex items-center gap-2 cursor-pointer group\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"visibility\"\r\n                value=\"admin\"\r\n                checked={visibility === \"admin\"}\r\n                onChange={(e) => setVisibility(e.target.value)}\r\n                className=\"w-4 h-4 cursor-pointer accent-blue-600\"\r\n              />\r\n              <span className=\"text-sm sm:text-base text-gray-700 group-hover:text-gray-900\">\r\n                Visible To Admin\r\n              </span>\r\n            </label>\r\n            <label className=\"flex items-center gap-2 cursor-pointer group\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"visibility\"\r\n                value=\"all\"\r\n                checked={visibility === \"all\"}\r\n                onChange={(e) => setVisibility(e.target.value)}\r\n                className=\"w-4 h-4 cursor-pointer accent-blue-600\"\r\n              />\r\n              <span className=\"text-sm sm:text-base text-gray-700 group-hover:text-gray-900\">\r\n                Visible To All\r\n              </span>\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-3\">\r\n            <button\r\n              onClick={handleSaveCustomTemplate}\r\n              className=\"w-full sm:w-auto bg-cyan-500 text-white px-6 sm:px-8 py-2.5 rounded-md text-sm sm:text-base hover:bg-cyan-600 active:bg-cyan-700 font-medium transition-colors shadow-sm\"\r\n            >\r\n              Save Template\r\n            </button>\r\n            <button\r\n              onClick={() => setShowPreview(!showPreview)}\r\n              className=\"w-full sm:w-auto bg-green-500 text-white px-6 sm:px-8 py-2.5 rounded-md text-sm sm:text-base hover:bg-green-600 active:bg-green-700 font-medium transition-colors shadow-sm\"\r\n            >\r\n              {showPreview ? 'Hide Preview' : 'Show Preview'}\r\n            </button>\r\n            <button\r\n              onClick={() => router.push(\"/newsletter/TemplatesListPage\")}\r\n              className=\"w-full sm:w-auto bg-gray-300 hover:bg-gray-400 active:bg-gray-500 text-gray-700 px-6 sm:px-8 py-2.5 rounded-md text-sm sm:text-base font-medium transition-colors shadow-sm\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n\r\n          {/* {savedTemplates.length > 0 && (\r\n            <div className=\"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n              <p className=\"text-sm sm:text-base text-green-800\">\r\n                ✓ <span className=\"font-semibold\">{savedTemplates.length}</span> template{savedTemplates.length !== 1 ? 's' : ''} saved in total\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div> */}\r\n\r\n          {showPreview && (\r\n            <div className=\"px-4 sm:px-6 md:px-8 pb-6\">\r\n              <div className=\"border-2 border-gray-300 rounded-lg bg-white overflow-hidden shadow-sm\">\r\n                <div className=\"bg-gray-100 border-b border-gray-300 px-4 sm:px-6 py-3 sm:py-4\">\r\n                  <h2 className=\"text-base sm:text-lg font-semibold text-gray-700\">\r\n                    Template Preview\r\n                  </h2>\r\n                </div>\r\n                <div className=\"p-4 sm:p-6\">\r\n                  <div className=\"border border-gray-300 rounded-lg bg-white overflow-hidden\">\r\n                    <div className=\"bg-gray-50 border-b border-gray-200 px-4 sm:px-6 py-3 sm:py-4\">\r\n                      <h3 className=\"text-base sm:text-lg md:text-xl font-bold text-gray-800 break-words\">\r\n                        {templateName || 'Untitled Template'}\r\n                      </h3>\r\n                      <p className=\"text-xs sm:text-sm text-gray-500 mt-1\">\r\n                        Visibility: <span className=\"font-medium\">{visibility === 'admin' ? 'Admin Only' : 'All Users'}</span>\r\n                      </p>\r\n                    </div>\r\n                    <div\r\n                      className=\"p-4 sm:p-6 text-sm sm:text-base overflow-auto\"\r\n                      style={{ maxHeight: '400px' }}\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: editorRef.current?.getContent() || '<p class=\"text-gray-400 italic\">No content yet...</p>'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}